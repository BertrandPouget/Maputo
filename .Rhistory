sample(1,1000)
sample(1:1000,1)
set.seed(1)
sample(1:1000,1)
library(sf)
library(tidyverse)
library(rgl)
setwd("C:/Users/markh/Documents/RHome/AppliedStat/Project")
#Creazione dataset senza geometry
dat <- st_read("datonite.shp")
dat <- dat[which(dat$osm_surf != "unk"),]
dat <- dat[order(dat$osm_surf),]
rownames(dat) <- 1:nrow(dat)
attach(dat)
dat <- cbind.data.frame(Length, osm_typo, osm_surf, id, image,
rmean, rvar, rmed, rmin, rmax,
gmean, gvar, gmed, gmin, gmax,
bmean, bvar, bmed, bmin, bmax)
categories <- dat[,3]
#Creazione dataset numerico
keeps <- c("rmean","rvar","rmax")
dat_num <- dat[keeps]
detach(dat)
plot3d(dat_num, col = ifelse(osm_surf=="paved","red","blue"))
plot3d(dat_num, col = ifelse(osm_surf=="paved","red","blue"))
dat <- st_read("datonite.shp")
dat <- dat[which(dat$osm_surf != "unk"),]
dat <- dat[order(dat$osm_surf),]
rownames(dat) <- 1:nrow(dat)
attach(dat)
dat <- cbind.data.frame(Length, osm_typo, osm_surf, id, image,
rmean, rvar, rmed, rmin, rmax,
gmean, gvar, gmed, gmin, gmax,
bmean, bvar, bmed, bmin, bmax)
categories <- dat[,3]
#Creazione dataset numerico
keeps <- c("rmean","rvar","rmax")
dat_num <- dat[keeps]
open3d()
plot3d(dat_num, col = ifelse(osm_surf=="paved","red","blue"))
pairs(dat_num)
detach(dat)
setwd("C:/Users/markh/Documents/RHome/AppliedStat/Project")
rm(list=ls())
library(sf)
library(sp)
library(ggplot2)
# Shapefile con i segmenti di strada
data = st_read("Road_cleaned2.shp")
data = data[order(as.numeric(data$id)),]
data
N_streets = dim(data)[1]
summary(data$Length)
cbind( "n"=table(data$osm_typo),
"perc"=round(table(data$osm_typo)/N_streets*100,2) )
cbind( "n"=table(data$osm_surf),
"perc"=round(table(data$osm_surf)/N_streets*100,2) )
# Greater Maputo area:
st_bbox(data)
(st_bbox(data)[3]-st_bbox(data)[1])*(st_bbox(data)[4]-st_bbox(data)[2]) # area
sum(data$Length)*1e-03 # km
# plot di alcuni segmenti:
i_asp = which(data$osm_surf=="paved")
i_unp = which(data$osm_surf=="unpaved")
i_unk = which(data$osm_surf=="unk")
ttt = character(dim(data)[1])
ttt[i_unk]= "1. unknown"; ttt[i_unp]="2. unpaved"; ttt[i_asp]="3. paved"
windows();  ggplot() +
geom_sf(data = data, aes(color=ttt,fill=ttt))+
scale_fill_manual(values=c("snow2", "#ffb01e", "grey45"))+
scale_color_manual(values=c("snow2", "#ffb01e", "grey45"))+
labs(fill= "Pavement surface")+
#ggtitle("Road network of the Greater Maputo area") +
coord_sf() +
theme(panel.grid.major = element_line(color = gray(.9), linetype=3, size=0.2),
panel.background = element_rect(fill="white"))+
guides(color=FALSE)
library(rgdal)
library(sp)
library(raster)
head(data[which(data$osm_surf=="paved"),])
head(data[which(data$osm_surf=="unpaved"),])
# paved and unpaved
setwd("C:/Users/andre/Desktop/Progetto Applied Stat/rater_mask_complete")
img_paved = brick("img__7.tif")
img_unpaved = brick("img__129.tif")
setwd("C:/Users/andre/Desktop/Progetto Applied Stat")
# full pictures:
par(mfrow=c(1,2)); plotRGB(img_paved); plotRGB(img_unpaved)
# layer by layer:
names(img_paved) = names(img_unpaved) = c("redBand","greenBand", "blueBand", "null")
plot(img_paved, col=gray(1:100/100))
View(values(img_paved))
# histogram of pixel components: red, green, blue
{
par(mfrow=c(2,3))
hist(img_paved$redBand, xlab="", main='red values', col='red')
hist(img_paved$greenBand, xlab="", main='green values', col='green')
hist(img_paved$blueBand, xlab="", main='blue values', col='blue')
hist(img_unpaved$redBand, xlab="", main='red values', col='red')
hist(img_unpaved$greenBand, xlab="", main='green values', col='green')
hist(img_unpaved$blueBand, xlab="", main='blue values', col='blue')
par(mfrow=c(1,1))
}
val_paved = data.frame(values(img_paved)[which(apply(values(img_paved),1,sum)!=0),])
val_unpaved = data.frame(values(img_unpaved)[which(apply(values(img_unpaved),1,sum)!=0),])
{
par(mfrow=c(2,3))
hist(val_paved$redBand, xlab="", main='red values', col='red')
hist(val_paved$greenBand, xlab="", main='green values', col='green')
hist(val_paved$blueBand, xlab="", main='blue values', col='blue')
hist(val_unpaved$redBand, xlab="", main='red values', col='red')
hist(val_unpaved$greenBand, xlab="", main='green values', col='green')
hist(val_unpaved$blueBand, xlab="", main='blue values', col='blue')
par(mfrow=c(1,1))
}
data = st_read("datonite.shp")
data = data[order(as.numeric(data$id)),]
data
N_streets = dim(data)[1]
summary(data$Length)
cbind( "n"=table(data$osm_typo),
"perc"=round(table(data$osm_typo)/N_streets*100,2) )
# nb: "unk"-> "unclassified": it is a type of road!
cbind( "n"=table(data$osm_surf),
"perc"=round(table(data$osm_surf)/N_streets*100,2) )
# nb: "unk"-> "unknown": road surface is not known
# Greater Maputo area:
st_bbox(data)
(st_bbox(data)[3]-st_bbox(data)[1])*(st_bbox(data)[4]-st_bbox(data)[2]) # area
sum(data$Length)*1e-03 # km
# plot di alcuni segmenti:
i_asp = which(data$osm_surf=="paved")
i_unp = which(data$osm_surf=="unpaved")
i_unk = which(data$osm_surf=="unk")
ttt = character(dim(data)[1])
ttt[i_unk]= "1. unknown"; ttt[i_unp]="2. unpaved"; ttt[i_asp]="3. paved"
windows();  ggplot() +
geom_sf(data = data, aes(color=ttt,fill=ttt))+
scale_fill_manual(values=c("snow2", "#ffb01e", "grey45"))+
scale_color_manual(values=c("snow2", "#ffb01e", "grey45"))+
labs(fill= "Pavement surface")+
#ggtitle("Road network of the Greater Maputo area") +
coord_sf() +
theme(panel.grid.major = element_line(color = gray(.9), linetype=3, size=0.2),
panel.background = element_rect(fill="white"))+
guides(color=FALSE)
# Images  -----------------------------------------------------------------
library(rgdal)
library(sp)
library(raster)
head(data[which(data$osm_surf=="paved"),])
head(data[which(data$osm_surf=="unpaved"),])
# paved and unpaved
setwd("C:/Users/andre/Desktop/Progetto Applied Stat/rater_mask_complete")
img_paved = brick("img__7.tif")
img_unpaved = brick("img__129.tif")
setwd("C:/Users/andre/Desktop/Progetto Applied Stat")
# full pictures:
par(mfrow=c(1,2)); plotRGB(img_paved); plotRGB(img_unpaved)
# layer by layer:
names(img_paved) = names(img_unpaved) = c("redBand","greenBand", "blueBand", "null")
plot(img_paved, col=gray(1:100/100))
View(values(img_paved))
# histogram of pixel components: red, green, blue
{
par(mfrow=c(2,3))
hist(img_paved$redBand, xlab="", main='red values', col='red')
hist(img_paved$greenBand, xlab="", main='green values', col='green')
hist(img_paved$blueBand, xlab="", main='blue values', col='blue')
hist(img_unpaved$redBand, xlab="", main='red values', col='red')
hist(img_unpaved$greenBand, xlab="", main='green values', col='green')
hist(img_unpaved$blueBand, xlab="", main='blue values', col='blue')
par(mfrow=c(1,1))
}
val_paved = data.frame(values(img_paved)[which(apply(values(img_paved),1,sum)!=0),])
val_unpaved = data.frame(values(img_unpaved)[which(apply(values(img_unpaved),1,sum)!=0),])
{
par(mfrow=c(2,3))
hist(val_paved$redBand, xlab="", main='red values', col='red')
hist(val_paved$greenBand, xlab="", main='green values', col='green')
hist(val_paved$blueBand, xlab="", main='blue values', col='blue')
hist(val_unpaved$redBand, xlab="", main='red values', col='red')
hist(val_unpaved$greenBand, xlab="", main='green values', col='green')
hist(val_unpaved$blueBand, xlab="", main='blue values', col='blue')
par(mfrow=c(1,1))
}
data = st_read("datonite.shp")
data = data[order(as.numeric(data$id)),]
data
N_streets = dim(data)[1]
summary(data$Length)
cbind( "n"=table(data$osm_typo),
"perc"=round(table(data$osm_typo)/N_streets*100,2) )
# nb: "unk"-> "unclassified": it is a type of road!
cbind( "n"=table(data$osm_surf),
"perc"=round(table(data$osm_surf)/N_streets*100,2) )
# nb: "unk"-> "unknown": road surface is not known
# Greater Maputo area:
st_bbox(data)
(st_bbox(data)[3]-st_bbox(data)[1])*(st_bbox(data)[4]-st_bbox(data)[2]) # area
sum(data$Length)*1e-03 # km
# plot di alcuni segmenti:
i_asp = which(data$osm_surf=="paved")
i_unp = which(data$osm_surf=="unpaved")
i_unk = which(data$osm_surf=="unk")
ttt = character(dim(data)[1])
ttt[i_unk]= "1. unknown"; ttt[i_unp]="2. unpaved"; ttt[i_asp]="3. paved"
windows();  ggplot() +
geom_sf(data = data, aes(color=ttt,fill=ttt))+
scale_fill_manual(values=c("snow2", "#ffb01e", "grey45"))+
scale_color_manual(values=c("snow2", "#ffb01e", "grey45"))+
labs(fill= "Pavement surface")+
#ggtitle("Road network of the Greater Maputo area") +
coord_sf() +
theme(panel.grid.major = element_line(color = gray(.9), linetype=3, size=0.2),
panel.background = element_rect(fill="white"))+
guides(color=FALSE)
# Images  -----------------------------------------------------------------
library(rgdal)
library(sp)
library(raster)
head(data[which(data$osm_surf=="paved"),])
head(data[which(data$osm_surf=="unpaved"),])
# paved and unpaved
setwd("C:/Users/andre/Desktop/Progetto Applied Stat/rater_mask_complete")
img_paved = brick("img__7.tif")
img_unpaved = brick("img__129.tif")
setwd("C:/Users/andre/Desktop/Progetto Applied Stat")
# full pictures:
par(mfrow=c(1,2)); plotRGB(img_paved); plotRGB(img_unpaved)
# layer by layer:
names(img_paved) = names(img_unpaved) = c("redBand","greenBand", "blueBand", "null")
plot(img_paved, col=gray(1:100/100))
View(values(img_paved))
# histogram of pixel components: red, green, blue
{
par(mfrow=c(2,3))
hist(img_paved$redBand, xlab="", main='red values', col='red')
hist(img_paved$greenBand, xlab="", main='green values', col='green')
hist(img_paved$blueBand, xlab="", main='blue values', col='blue')
hist(img_unpaved$redBand, xlab="", main='red values', col='red')
hist(img_unpaved$greenBand, xlab="", main='green values', col='green')
hist(img_unpaved$blueBand, xlab="", main='blue values', col='blue')
par(mfrow=c(1,1))
}
val_paved = data.frame(values(img_paved)[which(apply(values(img_paved),1,sum)!=0),])
val_unpaved = data.frame(values(img_unpaved)[which(apply(values(img_unpaved),1,sum)!=0),])
{
par(mfrow=c(2,3))
hist(val_paved$redBand, xlab="", main='red values', col='red')
hist(val_paved$greenBand, xlab="", main='green values', col='green')
hist(val_paved$blueBand, xlab="", main='blue values', col='blue')
hist(val_unpaved$redBand, xlab="", main='red values', col='red')
hist(val_unpaved$greenBand, xlab="", main='green values', col='green')
hist(val_unpaved$blueBand, xlab="", main='blue values', col='blue')
par(mfrow=c(1,1))
}
data = st_read("Road_cleaned2.shp")
data = data[order(as.numeric(data$id)),]
data
N_streets = dim(data)[1]
summary(data$Length)
cbind( "n"=table(data$osm_typo),
"perc"=round(table(data$osm_typo)/N_streets*100,2) )
# nb: "unk"-> "unclassified": it is a type of road!
cbind( "n"=table(data$osm_surf),
"perc"=round(table(data$osm_surf)/N_streets*100,2) )
# nb: "unk"-> "unknown": road surface is not known
# Greater Maputo area:
st_bbox(data)
(st_bbox(data)[3]-st_bbox(data)[1])*(st_bbox(data)[4]-st_bbox(data)[2]) # area
sum(data$Length)*1e-03 # km
# plot di alcuni segmenti:
i_asp = which(data$osm_surf=="paved")
i_unp = which(data$osm_surf=="unpaved")
i_unk = which(data$osm_surf=="unk")
ttt = character(dim(data)[1])
ttt[i_unk]= "1. unknown"; ttt[i_unp]="2. unpaved"; ttt[i_asp]="3. paved"
windows();  ggplot() +
geom_sf(data = data, aes(color=ttt,fill=ttt))+
scale_fill_manual(values=c("snow2", "#ffb01e", "grey45"))+
scale_color_manual(values=c("snow2", "#ffb01e", "grey45"))+
labs(fill= "Pavement surface")+
#ggtitle("Road network of the Greater Maputo area") +
coord_sf() +
theme(panel.grid.major = element_line(color = gray(.9), linetype=3, size=0.2),
panel.background = element_rect(fill="white"))+
guides(color=FALSE)
# Images  -----------------------------------------------------------------
library(rgdal)
library(sp)
library(raster)
head(data[which(data$osm_surf=="paved"),])
head(data[which(data$osm_surf=="unpaved"),])
# paved and unpaved
setwd("C:/Users/andre/Desktop/Progetto Applied Stat/rater_mask_complete")
img_paved = brick("img__7.tif")
img_unpaved = brick("img__129.tif")
setwd("C:/Users/andre/Desktop/Progetto Applied Stat")
# full pictures:
par(mfrow=c(1,2)); plotRGB(img_paved); plotRGB(img_unpaved)
# layer by layer:
names(img_paved) = names(img_unpaved) = c("redBand","greenBand", "blueBand", "null")
plot(img_paved, col=gray(1:100/100))
View(values(img_paved))
# histogram of pixel components: red, green, blue
{
par(mfrow=c(2,3))
hist(img_paved$redBand, xlab="", main='red values', col='red')
hist(img_paved$greenBand, xlab="", main='green values', col='green')
hist(img_paved$blueBand, xlab="", main='blue values', col='blue')
hist(img_unpaved$redBand, xlab="", main='red values', col='red')
hist(img_unpaved$greenBand, xlab="", main='green values', col='green')
hist(img_unpaved$blueBand, xlab="", main='blue values', col='blue')
par(mfrow=c(1,1))
}
val_paved = data.frame(values(img_paved)[which(apply(values(img_paved),1,sum)!=0),])
val_unpaved = data.frame(values(img_unpaved)[which(apply(values(img_unpaved),1,sum)!=0),])
{
par(mfrow=c(2,3))
hist(val_paved$redBand, xlab="", main='red values', col='red')
hist(val_paved$greenBand, xlab="", main='green values', col='green')
hist(val_paved$blueBand, xlab="", main='blue values', col='blue')
hist(val_unpaved$redBand, xlab="", main='red values', col='red')
hist(val_unpaved$greenBand, xlab="", main='green values', col='green')
hist(val_unpaved$blueBand, xlab="", main='blue values', col='blue')
par(mfrow=c(1,1))
}
centri <- st_read("Centri strade.shp")
View(centri)
View(data)
data[1,7]
geometry[[1]]
data[1,7][[1]]
data[1,7][[1]]$Bounding box
st_drop_geometry(data)
#Creazione dataset senza geometry
dat <- st_read("datonite.shp")
View(dat)
dat <- st_drop_geometry(dat)
x
st_set_geometry(centri[:,4],)
centri[:,4]
centri[,4]
#Creazione dataset senza geometry
dat <- st_read("datonite.shp")
View(dat)
`st_geometry<-`(dat$geometry)
dat$geometry
getwd()
dat <- st_read("datonite.shp")
library(sf)
dat <- st_read("datonite.shp")
View(dat)
getwd()
setwd(./Maputo)
